// Advisor data for modal popups
const advisorData = [
  {
    name: "Prof. Suzanne Devkota",
    title: "Director of Cedars-Sinai Human Microbiome Research Institute",
    image:
      "https://im8health.com/cdn/shop/files/Frame_1000004726.png?v=1727766672&width=900",
    bio: `<p>Prof. Suzanne Devkota is a leading expert in microbiome research and its impact on human health, with over 15 years of experience in the field.</p>
          <p>She is an Associate Professor at Cedars-Sinai Medical Center and the Director of the Microbiome Research Institute.</p>
          <p>Prof. Devkota's groundbreaking work focuses on understanding the role of the gut microbiome in chronic diseases, including inflammatory bowel disease, obesity, and diabetes.</p>
          <p>She has published extensively in top scientific journals and is a sought-after speaker at international conferences.</p>
          <p>Prof. Devkota's research emphasizes the critical connection between the microbiome and overall health, highlighting the potential for microbiome-based therapies.</p>
          <p>Her insights into how diet and lifestyle influence the gut microbiome align closely with IM8's mission to advance health through innovative diagnostics and personalized medicine.</p>
          <p>Prof. Devkota's expertise in microbiome science will be invaluable in helping IM8 develop cutting-edge solutions to improve health outcomes and foster preventative care.</p>`,
    link: "#",
  },
  {
    name: "Dr. James L. Green",
    title: "Former Chief Scientist of NASA",
    image:
      "https://im8health.com/cdn/shop/files/Frame_1000004724.png?v=1727766672&width=900",
    bio: `<p>Dr. James L. Green is the former Chief Scientist of NASA, where he dedicated an impressive 42 years to advancing space science and exploration.</p>
          <p>During his tenure, Dr. Green contributed to numerous groundbreaking missions, including the Mars Rover landings, the New Horizons mission to Pluto, and the Juno mission to Jupiter.</p>
          <p>He played a pivotal role in the development of planetary defense strategies and was instrumental in fostering international collaborations for space research.</p>
          <p>Dr. Green's extensive experience in managing large-scale scientific projects and his deep understanding of cutting-edge technologies bring a unique perspective to IM8.</p>
          <p>His work at NASA also included leveraging space research for health innovations, such as studying the effects of space travel on the human body and accelerated aging.</p>
          <p>His expertise in scientific innovation and strategic vision will be invaluable in advancing IM8's mission to revolutionize healthcare through precision diagnostics and personalized medicine.</p>`,
    link: "#",
  },
  {
    name: "Dr. Dawn Mussallem",
    title: "CMO of Fountain Life & Integrative Oncologist at Mayo Clinic",
    image:
      "https://im8health.com/cdn/shop/files/sab_Dawn_bio.jpg?v=1747304312&width=900",
    bio: `<p>Dr. Dawn Mussallem, DO, DipABLM, is a globally recognized physician-leader in lifestyle, integrative, and longevity medicine. She serves as Chief Medical Officer of Fountain Life—named Longevity Clinic of the Year 2025—and as a Founding Scientific Advisor to IM8 Health.</p>
          <p>Over 20 years as a Mayo Clinic physician, she founded the Mayo Clinic Integrative Breast Oncology Program, integrating lifestyle medicine, integrative symptom management, mind–body therapies, precision nutrition and exercise prescriptions, and survivorship support alongside conventional oncology.</p>
          <p>A stage IV cancer survivor and heart transplant recipient, she became the first person to complete a marathon after heart transplantation, embodying the resilience science she teaches.</p>
          <p>She is a global keynote speaker who energizes audiences with evidence-based optimism and contagious enthusiasm—advancing a mission to democratize wellness and elevate human flourishing.</p>`,
    link: "#",
  },
  {
    name: "Dr. James DiNicolantonio",
    title: "Cardiovascular Research Scientist and Doctor of Pharmacy",
    image:
      "https://im8health.com/cdn/shop/files/sab_DiNicolantonio_bio.png?v=1730865500&width=900",
    bio: `<p>Dr. James DiNicolantonio is a cardiovascular research scientist and Doctor of Pharmacy, known for his influential work in the field of heart health and evidence-based nutrition.</p>
          <p>Author of several bestselling books, including The Obesity Fix and Superfuel, he has published over 300 scientific papers, focusing on the impact of nutrition on long-term health and chronic disease prevention.</p>
          <p>A respected authority in the health and wellness community, Dr. DiNicolantonio's approach centers on simplifying complex scientific concepts, making health strategies accessible to a broad audience.</p>
          <p>He advocates for a proactive approach to wellness, combining cutting-edge research with practical applications to help individuals achieve peak physical and mental performance.</p>`,
    link: "#",
  },
  {
    name: "Dr. Jeremy London",
    title: "Board Certified Cardiovascular Surgeon",
    image:
      "https://im8health.com/cdn/shop/files/sab_London_bio.jpg?v=1741755302&width=900",
    bio: `<p>Dr. Jeremy London is a distinguished cardiothoracic surgeon renowned for his expertise in cardiac surgery and minimally invasive procedures.</p>
          <p>With 26 years of experience treating complex heart conditions, Dr. London emphasizes personalized patient care and integrates advanced surgical techniques to optimize cardiovascular health and recovery.</p>
          <p>Recognized for his compassionate and patient-centered approach, Dr. London excels at translating complex cardiac procedures into clear, understandable guidance, empowering patients to actively participate in their care.</p>
          <p>Dr. London's commitment to excellence and his dedication to patient education have established him as a trusted figure in the health and wellness community.</p>`,
    link: "#",
  },
  {
    name: "Dr. Amy Shah",
    title: 'Double-Board Certified Physician & Host of Podcast "Save Yourself"',
    image:
      "https://im8health.com/cdn/shop/files/sab_Shah_bio.jpg?v=1741754349&width=900",
    bio: `<p>Dr. Amy Shah is a double board-certified MD specializing in integrative medicine and a nutrition specialist.</p>
          <p>She works in clinical medicine, allergy/immunology, and over the last 10 years has developed a world-renowned wellness education platform, successfully launched a growing collection of health and wellness products, written bestselling books, including I'm So Effing Hungry and I'm So Effing Tired.</p>
          <p>Her goal is to empower people to "save themselves" through nutrition and lifestyle changes.</p>
          <p>Passionate about helping people take control of their health, Dr. Shah offers a wealth of knowledge on how to optimize vitality through nutrition, fasting, and lifestyle adjustments.</p>`,
    link: "#",
  },
  {
    name: "Dr. Ara Suppiah",
    title:
      "Performance Strategist, Sports Physician, Creator of Functional Sports Medicine",
    image:
      "https://im8health.com/cdn/shop/files/sab_Suppiah_bio.jpg?v=1750043459&width=900",
    bio: `<p>Dr. Ara Suppiah is a globally respected sports physician and performance strategist known for helping elite athletes perform at their highest level—consistently, intelligently, and without burning out.</p>
          <p>Born in Malaysia, trained in the UK, and now based in the U.S., Ara blends deep medical expertise with cutting-edge tools from neuroscience, functional medicine, genetics, biomechanics, and AI.</p>
          <p>He's worked with 7 World No.1s, 35 major golf wins, Olympic medalists, and multiple Ryder Cup teams. As Head of Medical Services for LIV Golf, he's building world-class systems to keep the game's best at the top of theirs.</p>
          <p>His mission is big: to empower one million athletes using the best of authentic intelligence + artificial intelligence.</p>`,
    link: "#",
  },
  {
    name: "Dr. Darshan Shah",
    title:
      "Board Certified Surgeon & Physician, CEO and Founder of Next Health",
    image:
      "https://im8health.com/cdn/shop/files/sab_DarshanShah_bio.jpg?v=1750043459&width=900",
    bio: `<p>Darshan Shah, MD, is a health and wellness specialist, board-certified surgeon, published author, and founder of Next Health, the world's first and largest Health Optimization and Longevity clinic.</p>
          <p>Dr. Shah is a board certified surgeon who has performed over 20,000 surgical procedures, including trauma and complex reconstructive procedures.</p>
          <p>Dr. Shah began his career at an accelerated MD program and earned his medical degree at the age of 21, becoming one of the youngest doctors in the United States. He continued his training at the Mayo Clinic.</p>
          <p>His passion is educating people on the topics of adding healthspan to your lifespan, having done over 100+ speaking engagements and hosting the critically acclaimed podcast Extend.</p>`,
    link: "#",
  },
  {
    name: "Simon Hill",
    title: "MSc, BSc, Nutritionist, Physiologist, Author and Podcast Host",
    image:
      "https://im8health.com/cdn/shop/files/sab_Hill_bio_1.jpg?v=1750043459&width=900",
    bio: `<p>Simon Hill, a physiotherapist and nutrition scientist, is dedicated to simplifying health and nutrition information.</p>
          <p>He began his career interested in the physiology and anatomy related to optimal athletic performance. Then, encouraged by his Dad's heart attack, he turned his attention to nutrition's role in preventing disease and optimising health.</p>
          <p>Today, Simon hosts a podcast featuring experts translating research into practical advice. He authored "The Proof is in the Plants," advocating for a plant-rich diet based on current nutrition research.</p>
          <p>His podcast, The Proof, has surpassed 40 million listens, exploring various lifestyle factors impacting well-being. Simon now conducts immersive longevity experiences, aiming to empower people to live better for longer.</p>`,
    link: "#",
  },
];

// Modal HTML template
const modalHTML = `
<!-- Advisor Modal Overlay -->
<div id="advisor-modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
  <!-- Modal Container -->
  <div class="relative bg-gradient-to-b from-[#f5eaea] to-white rounded-3xl max-w-md w-full max-h-[90vh] overflow-hidden shadow-2xl">
    
    <!-- Close Button -->
    <button id="modal-close" class="absolute top-4 right-4 z-10 w-10 h-10 flex items-center justify-center text-[#50000B] hover:scale-110 transition-transform">
      <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M25.428 6.5719L6.5718 25.4281" stroke="currentColor" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"/>
        <path d="M25.4282 25.4281L6.57202 6.5719" stroke="currentColor" stroke-width="2" stroke-linecap="square" stroke-linejoin="round"/>
      </svg>
    </button>

    <!-- Modal Content -->
    <div class="overflow-y-auto max-h-[90vh]">
      <!-- Advisor Image -->
      <div class="w-full aspect-[2/1] overflow-hidden">
        <img id="modal-image" src="" alt="" class="w-full h-full object-cover object-top">
      </div>

      <!-- Advisor Info -->
      <div class="p-6 pb-8">
        <!-- Name & Title -->
        <h3 id="modal-name" class="text-xl font-bold text-[#50000B] mb-2"></h3>
        <p id="modal-title" class="text-sm text-[#7B1E2A] mb-4"></p>

        <!-- Bio Text -->
        <div id="modal-bio" class="text-sm text-[#50000B]/80 leading-relaxed space-y-3 max-h-[200px] overflow-y-auto pr-2 mb-6">
        </div>

        <!-- Learn More Button -->
        <a id="modal-link" href="#" class="block w-full py-3.5 bg-[#50000B] text-white text-center text-sm font-semibold uppercase tracking-wider rounded-full hover:bg-[#7B1E2A] transition-colors">
          Learn More
        </a>
      </div>
    </div>
  </div>
</div>
`;

// Initialize modal functionality
function initAdvisorModal() {
  // Inject modal HTML into the page
  const modalContainer = document.getElementById("advisor-modal-container");
  if (modalContainer) {
    modalContainer.innerHTML = modalHTML;
  } else {
    // If no container, append to body
    document.body.insertAdjacentHTML("beforeend", modalHTML);
  }

  const modal = document.getElementById("advisor-modal");
  const closeBtn = document.getElementById("modal-close");
  const advisorCards = document.querySelectorAll(".advisor-card");

  if (!modal || !closeBtn) {
    console.warn("Advisor modal elements not found");
    return;
  }

  console.log("Found", advisorCards.length, "advisor cards");

  // Open modal when clicking on advisor card
  advisorCards.forEach((card) => {
    card.addEventListener("click", () => {
      const index = parseInt(card.dataset.index, 10);
      openModal(index);
    });
  });

  // Close modal when clicking close button
  closeBtn.addEventListener("click", closeModal);

  // Close modal when clicking outside
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  // Close modal on Escape key
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !modal.classList.contains("hidden")) {
      closeModal();
    }
  });
}

function openModal(index) {
  const modal = document.getElementById("advisor-modal");
  const advisor = advisorData[index];

  if (!advisor) {
    console.warn("Advisor data not found for index:", index);
    return;
  }

  // Populate modal content
  document.getElementById("modal-image").src = advisor.image;
  document.getElementById("modal-image").alt = advisor.name;
  document.getElementById("modal-name").textContent = advisor.name;
  document.getElementById("modal-title").textContent = advisor.title;
  document.getElementById("modal-bio").innerHTML = advisor.bio;
  document.getElementById("modal-link").href = advisor.link;

  // Show modal
  modal.classList.remove("hidden");
  modal.classList.add("flex");
  document.body.style.overflow = "hidden";

  // Add entrance animation
  const modalContent = modal.querySelector(".relative");
  modalContent.style.transform = "scale(0.95)";
  modalContent.style.opacity = "0";
  setTimeout(() => {
    modalContent.style.transition = "transform 0.3s ease, opacity 0.3s ease";
    modalContent.style.transform = "scale(1)";
    modalContent.style.opacity = "1";
  }, 10);
}

function closeModal() {
  const modal = document.getElementById("advisor-modal");
  const modalContent = modal.querySelector(".relative");

  // Add exit animation
  modalContent.style.transform = "scale(0.95)";
  modalContent.style.opacity = "0";

  setTimeout(() => {
    modal.classList.add("hidden");
    modal.classList.remove("flex");
    document.body.style.overflow = "";
    modalContent.style.transition = "";
  }, 200);
}

// Initialize when DOM is ready or when component is loaded
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", initAdvisorModal);
} else {
  // Small delay to ensure components are loaded
  setTimeout(initAdvisorModal, 100);
}

// Also listen for custom event if components are loaded dynamically
document.addEventListener("brilliantMindsLoaded", initAdvisorModal);
